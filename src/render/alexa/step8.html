---
title: "Step 8"
layout: "alexa"
isPage: true
---

<div class="container" style="margin-top: 71px;">
	<h1>Testing and Debugging</h1>

	<h2>Testing Your Skill</h2>

	<p>Welcome to the Test Lab! Make sure there are green check marks on all of the steps above this one, or else you won't be able to test your skill.</p>

	<p>If the switch in the info box is disabled, simply enable it!</p>

	<p>Here, there's a <b>Voice Simulator</b>, which is fun to make Alexa say whatever you want her to say.</p>

	<p>Then there's the <b>Service Simulator</b>, which is what we'll be using. There's a text box where you can enter an utterance. In one of the formats that you specified in your Interaction Model, try one out.</p>

	<div class="blockquote">
		<p>Who is twenty five?</p>
	</div>

	<p>Quick note: for numbers, you may need to spell out the numbers. Sometimes Alexa can be picky about this.</p>

	<p>At this point, your test will fail! Don't panic! This is normal!</p>

	<h2>Debugging</h2>

	<p>Right now, in your Lambda Response, you should be seeing</p>

	<div class="blockquote">
		<p>The remote endpoint could not be called, or the response it returned was invalid.</p>
	</div>

	<p>Let's figure out why this is happening.</p>

	<p>Copy the Lambda Request JSON and navigate back to the Lambda page in your <a href="https://aws.amazon.com">AWS Console</a>.</p>

	<p>At the top, click <b>Action</b> > <b>Configure Test Event</b>, and paste the Lambda Request JSON in there. Then click the blue <b>Test</b> button. You'll get an error that looks like the following:</p>

	<pre>
{
  "errorMessage": "name 'should_end_session' is not defined",
  "errorType": "NameError"
}</pre>

	<p>It looks like we're missing a variable called <span class="code">should_end_session</span>. We can scroll down to the <b>Log Output</b> and take a look at the stack trace. It'll point you to a line number inside the <span class="code">get_pokemon_name</span> function. Looks like we forgot to include it here!</p>

	<p>The <span class="code">should_end_session</span> variable determines whether we should end the session or not. For example, if there's an error and you want Alexa to prompt the user to try again, you would set <span class="code">should_end_session = False</span>, whereas if Alexa has completed the task, you'll set <span class="code">should_end_session = True</span>. We'll add these accordingly.</p>

	<pre>
if POKEMON_SLOT_NAME in intent['slots']:
    pokemon_number = intent['slots'][POKEMON_SLOT_NAME]['value']
    pokemon_name = get_pokemon(intent['slots'][POKEMON_SLOT_NAME]['value'])
    speech_output = "Pokedex entry " + pokemon_number + " is named " + pokemon_name + "."
    should_end_session = True
else:
    speech_output = "I'm not sure what you mean by that. " \
                    "Please try again."
    should_end_session = False</pre>

    <p>Your if statement should now look like this. Click <b>Save and Test</b>, and the execution result should succeed!</p>

    <p>Let's got back to your <a href="https://developer.amazon.com">developer console</a> and run the same command again. This time, you should get a Lambda response in JSON form, and under <span class="code">response.outputSpeech.text</span>, it should print what you've told her to print.</p>

    <h2>Edge Cases</h2>

    <p>Don't forget that it's always good practice to test your edge cases. Remember that the list we've provided consists of first generation Pokemon. This means that only asking for Pokemons #1 through #151 are valid. If you ask Alexa "Who is two hundred", the Lambda response will be invalid.</p>

	<p>Since this isn't an Alexa specific debugging issue, see if you can debug this yourself! Remember that the <span class="code">value</span> stored inside of our request object is a string, not an integer. To convert from string to integer, you can use <span class="code">int(string)</span>.</p>
</div>

<div class="container btn-container">
	<div class="left">
		<a href="/alexa/step7.html" class="btn btn-secondary">← Previous</a>
	</div>
	<div class="right">
		<a href="/alexa/step9.html" class="btn btn-secondary">Next →</a>
	</div>
</div>